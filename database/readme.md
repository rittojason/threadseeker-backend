# Database Schema of Threadseeker

This document describes the table schema of the database of Threadseeker. We're using Supabase as our database. Create these tables in your Supabase or PostgreSQL database:

![Database Schema](https://i.imgur.com/PVWJ77B.png)


## 1. Threads Users
```sql
create table public.threads_users (
  id bigint generated by default as identity not null,
  username text not null,
  search_count bigint null default '0'::bigint,
  created_at timestamp with time zone not null default now(),
  pk_id text not null,
  follower_count bigint not null default '0'::bigint,
  following_count bigint not null default '0'::bigint,
  profile_pic_url text null,
  full_name text null,
  updated_at timestamp with time zone null,
  constraint threads_users_pkey primary key (id),
  constraint threads_users_pk_id_key unique (pk_id),
  constraint threads_users_username_key unique (username)
) TABLESPACE pg_default;
```

## 2. Reports
```sql
create table public.reports (
  user_pkid text null,
  like_count bigint null,
  created_at timestamp with time zone not null default now(),
  id text not null,
  is_finished boolean null default false,
  reply_count bigint null,
  average_post_time integer null,
  post_density real null,
  updated_at timestamp with time zone null default now(),
  crawled_post_count integer null,
  reply_density real null default 0,
  constraint reports_pkey primary key (id),
  constraint public_reports_user_pkid_fkey foreign KEY (user_pkid) references threads_users (pk_id) on update CASCADE
) TABLESPACE pg_default;

create trigger handle_updated_at BEFORE
update on reports for EACH row
execute FUNCTION extensions.moddatetime ('updated_at');
```

## 3. Popular ThreadsPosts
```sql
create table public.popular_posts (
  id bigint generated by default as identity not null,
  report_id text null,
  caption text null,
  permalink text null,
  like_count bigint null,
  repost_count bigint null,
  quote_count bigint null,
  created_at timestamp with time zone not null default now(),
  reply_count bigint null,
  pk text not null,
  is_visible boolean not null default true,
  constraint report_top_3_posts_pkey primary key (id),
  constraint report_top_3_posts_pk_id_key unique (pk),
  constraint public_report_top_3_posts_report_id_fkey foreign KEY (report_id) references reports (id) on update CASCADE on delete CASCADE
) TABLESPACE pg_default;
```
